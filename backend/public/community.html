<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG Nation Community - Professional Learning Hub</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #667eea;
            --primary-dark: #5a6fd8;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --background: #fafbfc;
            --surface: #ffffff;
            --surface-elevated: #ffffff;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Modern App Container */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            background: var(--surface);
            position: relative;
        }
        
        /* Modern Chat Container */
        .chat-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--background);
            position: relative;
        }
        
        /* Enhanced Chat Header */
        .chat-header {
            background: var(--surface-elevated);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 10;
        }
        
        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            opacity: 0.02;
            z-index: -1;
        }
        
        .chat-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .chat-avatar {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-lg);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: var(--shadow-md);
            position: relative;
        }
        
        .chat-avatar::after {
            content: '';
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 14px;
            height: 14px;
            background: var(--success-color);
            border: 3px solid var(--surface);
            border-radius: 50%;
        }
        
        .chat-details h4 {
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0;
            color: var(--text-primary);
            letter-spacing: -0.025em;
        }
        
        .chat-details p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .online-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            background: var(--success-color);
            color: white;
            padding: 0.125rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .online-indicator::before {
            content: '';
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        .chat-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .chat-btn {
            width: 44px;
            height: 44px;
            background: transparent;
            border: none;
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .chat-btn:hover {
            background: var(--border-light);
            color: var(--text-primary);
            transform: translateY(-1px);
        }
        
        .chat-btn:active {
            transform: translateY(0);
        }
        
        .chat-btn .iconify {
            font-size: 1.25rem;
        }
        
        /* Enhanced Messages Container */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background: var(--background);
            background-image: 
                radial-gradient(circle at 25px 25px, rgba(102, 126, 234, 0.03) 1px, transparent 1px),
                radial-gradient(circle at 75px 75px, rgba(118, 75, 162, 0.02) 1px, transparent 1px);
            background-size: 50px 50px;
            height: calc(100vh - 140px);
            position: relative;
        }
        
        /* Modern Message Bubbles */
        .message {
            margin-bottom: 1.25rem;
            display: flex;
            align-items: flex-end;
            gap: 0.75rem;
            animation: slideInUp 0.3s ease;
        }
        
        .message.sent {
            flex-direction: row-reverse;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 1rem 1.25rem;
            border-radius: var(--radius-xl);
            position: relative;
            word-wrap: break-word;
            box-shadow: var(--shadow-sm);
            transition: all 0.2s ease;
        }
        
        .message.received .message-bubble {
            background: var(--surface-elevated);
            border-bottom-left-radius: var(--radius-sm);
            border: 1px solid var(--border-light);
        }
        
        .message.sent .message-bubble {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-bottom-right-radius: var(--radius-sm);
            color: white;
        }
        
        .message-bubble:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }
        
        .message-text {
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.5;
            font-weight: 400;
        }
        
        .message-time {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            text-align: right;
            opacity: 0.7;
            font-weight: 500;
        }
        
        .message.sent .message-time {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .message.received .message-time {
            color: var(--text-muted);
        }
        
        /* Modern Message Input */
        .message-input-container {
            background: var(--surface-elevated);
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            gap: 1rem;
            backdrop-filter: blur(10px);
            position: relative;
        }
        
        .input-wrapper {
            flex: 1;
            position: relative;
        }
        
        .message-input {
            width: 100%;
            padding: 0.875rem 1.25rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            font-size: 0.95rem;
            outline: none;
            transition: all 0.2s ease;
            background: var(--surface);
            color: var(--text-primary);
            font-family: inherit;
        }
        
        .message-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: var(--surface-elevated);
        }
        
        .message-input::placeholder {
            color: var(--text-muted);
            font-weight: 400;
        }
        
        .input-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .input-btn {
            width: 48px;
            height: 48px;
            background: var(--primary-color);
            border: none;
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-md);
        }
        
        .input-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .input-btn:active {
            transform: translateY(0);
        }
        
        .input-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: var(--shadow-sm);
        }
        
        .input-btn .iconify {
            font-size: 1.25rem;
        }
        
        /* Enhanced Welcome Container */
        .welcome-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 2rem;
            background: var(--surface);
            border-radius: var(--radius-xl);
            margin: 1rem;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .welcome-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            opacity: 0.05;
            z-index: 0;
        }
        
        .welcome-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-lg);
            position: relative;
            z-index: 1;
        }
        
        .welcome-title {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            letter-spacing: -0.025em;
            position: relative;
            z-index: 1;
        }
        
        .welcome-text {
            font-size: 1rem;
            color: var(--text-secondary);
            max-width: 400px;
            line-height: 1.6;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }
        
        /* Typing Indicator Enhancement */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.25rem;
            background: var(--surface-elevated);
            border-radius: var(--radius-xl);
            border-bottom-left-radius: var(--radius-sm);
            box-shadow: var(--shadow-sm);
            margin-bottom: 1.25rem;
            max-width: 100px;
            border: 1px solid var(--border-light);
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Enhanced Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .messages-container {
                padding: 1rem;
            }
            
            .message-bubble {
                max-width: 85%;
                padding: 0.875rem 1rem;
            }
            
            .message-input-container {
                padding: 1rem;
            }
            
            .chat-header {
                padding: 1rem;
            }
            
            .welcome-container {
                margin: 0.5rem;
                padding: 1.5rem;
            }
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --background: #1a202c;
                --surface: #2d3748;
                --surface-elevated: #374151;
                --text-primary: #f7fafc;
                --text-secondary: #e2e8f0;
                --text-muted: #a0aec0;
                --border: #4a5568;
                --border-light: #2d3748;
            }
        }
        
        /* Loading states */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
        
        /* Success animations */
        .message-sent {
            animation: messageSent 0.3s ease;
        }
        
        @keyframes messageSent {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Focus states for accessibility */
        .chat-btn:focus,
        .input-btn:focus,
        .message-input:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(4px);
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: var(--surface-elevated);
            border-radius: var(--radius-xl);
            padding: 2rem;
            max-width: 450px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            transform: scale(0.9) translateY(-20px);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-light);
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }
        
        .modal-close {
            width: 32px;
            height: 32px;
            background: transparent;
            border: none;
            border-radius: 50%;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            background: var(--border-light);
            color: var(--text-primary);
        }
        
        /* Search Modal */
        .search-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.95rem;
            outline: none;
            transition: all 0.2s ease;
            background: var(--surface);
            margin-bottom: 1rem;
        }
        
        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .search-result {
            padding: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            background: var(--surface);
        }
        
        .search-result:hover {
            background: var(--border-light);
            transform: translateY(-1px);
        }
        
        .search-result-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }
        
        .search-result-time {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        /* File Upload Modal */
        .file-upload-area {
            border: 2px dashed var(--border);
            border-radius: var(--radius-lg);
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: var(--surface);
        }
        
        .file-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.05);
        }
        
        .file-upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }
        
        .file-upload-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 1rem;
        }
        
        .file-upload-text {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .file-upload-hint {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        .file-input {
            display: none;
        }
        
        .file-preview {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--border-light);
            border-radius: var(--radius-md);
            margin-top: 1rem;
        }
        
        .file-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
        }
        
        .file-info {
            flex: 1;
        }
        
        .file-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .file-size {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        .file-remove {
            width: 32px;
            height: 32px;
            background: var(--danger-color);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Menu Modal */
        .menu-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.5rem;
        }
        
        .menu-item:hover {
            background: var(--border-light);
        }
        
        .menu-icon {
            width: 40px;
            height: 40px;
            background: var(--border-light);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }
        
        .menu-text {
            flex: 1;
        }
        
        .menu-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .menu-description {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        /* Message with file */
        .message-file {
            background: var(--border-light);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .message.sent .message-file {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .file-download {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }
        
        .message.sent .file-download {
            color: white;
        }
        
        /* Search highlight */
        .search-highlight {
            background: rgba(255, 235, 59, 0.3);
            padding: 0.125rem 0.25rem;
            border-radius: 2px;
        }
        
        /* Loading spinner */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Modern Chat App Container -->
    <div class="app-container">
        <!-- Enhanced Chat Container -->
        <div class="chat-container">
            <!-- Modern Chat Header -->
            <div class="chat-header">
                <div class="chat-info">
                    <div class="chat-avatar">IG</div>
                    <div class="chat-details">
                        <h4>IG Nation Community</h4>
                        <p>
                            Ask questions, share knowledge
                            <span class="online-indicator" id="onlineCount">6 online</span>
                        </p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="chat-btn" onclick="showMembers()" title="View Members">
                        <iconify-icon icon="material-symbols:group"></iconify-icon>
                    </button>
                    <button class="chat-btn" onclick="openSearch()" title="Search Messages">
                        <iconify-icon icon="material-symbols:search"></iconify-icon>
                    </button>
                    <button class="chat-btn" onclick="openFileUpload()" title="Upload File">
                        <iconify-icon icon="material-symbols:attach-file"></iconify-icon>
                    </button>
                    <button class="chat-btn" onclick="openMenu()" title="More Options">
                        <iconify-icon icon="material-symbols:more-vert"></iconify-icon>
                    </button>
                </div>
            </div>
            
            <!-- Enhanced Messages Container -->
            <div class="messages-container" id="messagesContainer">
                <!-- Welcome Message -->
                <div class="welcome-container" id="welcomeContainer">
                    <div class="welcome-icon">
                        <iconify-icon icon="material-symbols:chat"></iconify-icon>
                    </div>
                    <h3 class="welcome-title">Welcome to IG Nation Community!</h3>
                    <p class="welcome-text">
                        Connect with fellow students, ask questions, and share your learning journey. 
                        Our community is here to support your academic success with real-time collaboration.
                    </p>
                </div>
                
                <!-- Messages will be populated here -->
                <div id="messagesList" style="display: none;">
                    <!-- Sample enhanced messages -->
                    <div class="message received">
                        <div class="message-avatar">AI</div>
                        <div class="message-bubble">
                            <p class="message-text">Welcome to the IG Nation community! Feel free to ask any questions about your studies. I'm here to help! ðŸŽ“</p>
                            <div class="message-time">10:30 AM</div>
                        </div>
                    </div>
                    
                    <div class="message sent">
                        <div class="message-avatar">Me</div>
                        <div class="message-bubble">
                            <p class="message-text">Thank you! I'm excited to be part of this learning community. The resources here are amazing! âœ¨</p>
                            <div class="message-time">10:32 AM</div>
                        </div>
                    </div>
                    
                    <div class="message received">
                        <div class="message-avatar">SM</div>
                        <div class="message-bubble">
                            <p class="message-text">Anyone working on the physics assignment? I could use some help with the thermodynamics problems. ðŸ¤”</p>
                            <div class="message-time">10:35 AM</div>
                        </div>
                    </div>
                    
                    <div class="message received">
                        <div class="message-avatar">AH</div>
                        <div class="message-bubble">
                            <p class="message-text">I'm working on it too! The heat transfer calculations are tricky. Let's discuss it together. ðŸ”¥</p>
                            <div class="message-time">10:37 AM</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modern Message Input -->
            <div class="message-input-container">
                <div class="input-wrapper">
                    <input type="text" class="message-input" id="messageInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
                </div>
                <div class="input-actions">
                    <button class="input-btn" onclick="attachFile()" title="Attach File">
                        <iconify-icon icon="material-symbols:attach-file"></iconify-icon>
                    </button>
                    <button class="input-btn" onclick="sendMessage()" id="sendBtn" title="Send Message">
                        <iconify-icon icon="material-symbols:send"></iconify-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Simple working interface - no complex modals needed -->

    <script>
        // Enhanced community functionality
        let messages = [];
        let members = [];
        let isTyping = false;
        let typingTimer;
        let messageId = 0;
        let selectedFile = null;
        let searchResults = [];
        
        // Enhanced sample members data
        const sampleMembers = [
            { id: 1, name: "Sarah Mitchell", status: "Online", avatar: "SM", subject: "Mathematics", lastSeen: "now" },
            { id: 2, name: "Ahmed Hassan", status: "Online", avatar: "AH", subject: "Physics", lastSeen: "now" },
            { id: 3, name: "Emily Chen", status: "Online", avatar: "EC", subject: "Chemistry", lastSeen: "now" },
            { id: 4, name: "Mohamed Ali", status: "Online", avatar: "MA", subject: "English", lastSeen: "now" },
            { id: 5, name: "Fatima Al-Zahra", status: "Online", avatar: "FA", subject: "Mathematics", lastSeen: "now" },
            { id: 6, name: "David Kim", status: "Online", avatar: "DK", subject: "Physics", lastSeen: "now" }
        ];
        
        // Enhanced sample messages data
        const sampleMessages = [
            {
                id: 1,
                sender: "AI",
                text: "Welcome to the IG Nation community! Feel free to ask any questions about your studies. I'm here to help! ðŸŽ“",
                time: "10:30 AM",
                type: "received",
                timestamp: Date.now() - 1800000
            },
            {
                id: 2,
                sender: "Me",
                text: "Thank you! I'm excited to be part of this learning community. The resources here are amazing! âœ¨",
                time: "10:32 AM",
                type: "sent",
                timestamp: Date.now() - 1680000
            },
            {
                id: 3,
                sender: "SM",
                text: "Anyone working on the physics assignment? I could use some help with the thermodynamics problems. ðŸ¤”",
                time: "10:35 AM",
                type: "received",
                timestamp: Date.now() - 1500000
            },
            {
                id: 4,
                sender: "AH",
                text: "I'm working on it too! The heat transfer calculations are tricky. Let's discuss it together. ðŸ”¥",
                time: "10:37 AM",
                type: "received",
                timestamp: Date.now() - 1380000
            }
        ];
        
        // Initialize the enhanced community
        document.addEventListener('DOMContentLoaded', function() {
            loadMembers();
            loadMessages();
            updateOnlineCount();
            simulateActivity();
            setupMessageInput();
        });
        
        // Setup enhanced message input
        function setupMessageInput() {
            const messageInput = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            
            messageInput.addEventListener('input', function() {
                if (this.value.trim()) {
                    sendBtn.disabled = false;
                    sendBtn.style.background = 'var(--primary-color)';
                } else {
                    sendBtn.disabled = true;
                    sendBtn.style.background = 'var(--text-muted)';
                }
            });
        }
        
        // Load members
        function loadMembers() {
            members = [...sampleMembers];
        }
        
        // Load messages
        function loadMessages() {
            messages = [...sampleMessages];
            renderMessages();
        }
        
        // Enhanced message rendering
        function renderMessages() {
            const messagesList = document.getElementById('messagesList');
            const welcomeContainer = document.getElementById('welcomeContainer');
            
            if (messages.length > 0) {
                welcomeContainer.style.display = 'none';
                messagesList.style.display = 'block';
                
                messagesList.innerHTML = messages.map(message => `
                    <div class="message ${message.type}">
                        <div class="message-avatar">${message.sender}</div>
                        <div class="message-bubble">
                            <p class="message-text">${message.text}</p>
                            <div class="message-time">${message.time}</div>
                        </div>
                    </div>
                `).join('');
                
                scrollToBottom();
            } else {
                welcomeContainer.style.display = 'flex';
                messagesList.style.display = 'none';
            }
        }
        
        // Enhanced send message
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();
            
            if (messageText) {
                const newMessage = {
                    id: ++messageId,
                    sender: "Me",
                    text: messageText,
                    time: getCurrentTime(),
                    type: "sent",
                    timestamp: Date.now()
                };
                
                messages.push(newMessage);
                renderMessages();
                messageInput.value = '';
                
                // Disable send button
                const sendBtn = document.getElementById('sendBtn');
                sendBtn.disabled = true;
                sendBtn.style.background = 'var(--text-muted)';
                
                // Add sent animation
                const lastMessage = document.querySelector('.message:last-child');
                if (lastMessage) {
                    lastMessage.classList.add('message-sent');
                }
                
                // Simulate enhanced response
                setTimeout(() => {
                    simulateEnhancedResponse(messageText);
                }, 1000 + Math.random() * 2000);
            }
        }
        
        // Enhanced key press handling
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            } else {
                showTypingIndicator();
                clearTimeout(typingTimer);
                typingTimer = setTimeout(hideTypingIndicator, 1000);
            }
        }
        
        // Enhanced typing indicator
        function showTypingIndicator() {
            if (!isTyping) {
                isTyping = true;
                const messagesList = document.getElementById('messagesList');
                const typingIndicator = document.createElement('div');
                typingIndicator.className = 'typing-indicator';
                typingIndicator.id = 'typingIndicator';
                typingIndicator.innerHTML = `
                    <div class="message-avatar">AI</div>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                `;
                messagesList.appendChild(typingIndicator);
                scrollToBottom();
            }
        }
        
        // Hide typing indicator
        function hideTypingIndicator() {
            isTyping = false;
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        // Enhanced response simulation
        function simulateEnhancedResponse(userMessage) {
            hideTypingIndicator();
            
            const responses = [
                "That's a great question! Let me help you with that. ðŸ¤“",
                "I understand what you're asking. Here's what I think... ðŸ’­",
                "Interesting point! Other students might benefit from this discussion. ðŸŒŸ",
                "Let me share some resources that might help you. ðŸ“š",
                "That's exactly the kind of collaborative learning we encourage here! ðŸŽ¯",
                "Great to see active participation in the community! ðŸ‘",
                "I can definitely help with that. Let's break it down together. ðŸ”"
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            
            const responseMessage = {
                id: ++messageId,
                sender: "AI",
                text: randomResponse,
                time: getCurrentTime(),
                type: "received",
                timestamp: Date.now()
            };
            
            messages.push(responseMessage);
            renderMessages();
        }
        
        // Get current time
        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }
        
        // Enhanced scroll to bottom
        function scrollToBottom() {
            const messagesContainer = document.getElementById('messagesContainer');
            setTimeout(() => {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }
        
        // Update online count
        function updateOnlineCount() {
            const onlineCount = document.getElementById('onlineCount');
            onlineCount.textContent = `${members.length} online`;
        }
        
        // Enhanced show members
        function showMembers() {
            const membersList = members.map(member => 
                `â€¢ ${member.name} (${member.subject}) - ${member.status}`
            ).join('\n');
            
            alert(`Online Members (${members.length}):\n\n${membersList}\n\nMore features coming soon! ðŸš€`);
        }
        
        // Enhanced attach file
        function attachFile() {
            alert('File attachment feature coming soon! ðŸ“Ž\n\nYou\'ll be able to share documents, images, and study materials.');
        }
        
        // Enhanced activity simulation
        function simulateActivity() {
            // Randomly update member status
            setInterval(() => {
                const randomMember = members[Math.floor(Math.random() * members.length)];
                const statuses = ['Online', 'Away', 'Busy'];
                const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                
                if (randomStatus !== randomMember.status) {
                    randomMember.status = randomStatus;
                    updateOnlineCount();
                }
            }, 30000);
            
            // Simulate enhanced community messages
            setInterval(() => {
                if (Math.random() < 0.25) { // 25% chance every 15 seconds
                    const communityMessages = [
                        "Anyone available to help with calculus? ðŸ“",
                        "Great study session yesterday! Thanks everyone. ðŸ™",
                        "Found some useful resources for the upcoming exam. ðŸ“–",
                        "Physics lab was amazing today! âš¡",
                        "Study group meeting at 3 PM in the library. ðŸ“š",
                        "Just aced my math test! Thanks for the help! ðŸŽ‰",
                        "Chemistry experiment results are in! ðŸ”¬",
                        "English essay due tomorrow - any last-minute tips? âœï¸"
                    ];
                    
                    const randomMessage = communityMessages[Math.floor(Math.random() * communityMessages.length)];
                    const randomMember = members[Math.floor(Math.random() * members.length)];
                    
                    const newMessage = {
                        id: ++messageId,
                        sender: randomMember.avatar,
                        text: randomMessage,
                        time: getCurrentTime(),
                        type: "received",
                        timestamp: Date.now()
                    };
                    
                    messages.push(newMessage);
                    renderMessages();
                }
            }, 15000);
        }
        
        // All complex modal functions removed - using simple prompts and alerts instead
        
        // Simple working functions
        function openSearch() {
            const query = prompt('Search in messages:');
            if (query && query.trim()) {
                const results = messages.filter(msg => 
                    msg.text.toLowerCase().includes(query.toLowerCase())
                );
                
                if (results.length > 0) {
                    let resultText = `Found ${results.length} message(s):\n\n`;
                    results.forEach((msg, index) => {
                        resultText += `${index + 1}. ${msg.sender}: ${msg.text.substring(0, 50)}...\n`;
                    });
                    alert(resultText);
                } else {
                    alert('No messages found matching your search.');
                }
            }
        }
        
        function openFileUpload() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png,.mp4,.txt';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 10 * 1024 * 1024) {
                        alert('File size must be less than 10MB');
                        return;
                    }
                    
                    const fileMessage = {
                        id: ++messageId,
                        sender: "Me",
                        text: `ðŸ“Ž Uploaded file: ${file.name} (${(file.size / 1024).toFixed(1)} KB)`,
                        time: getCurrentTime(),
                        type: "sent",
                        timestamp: Date.now()
                    };
                    
                    messages.push(fileMessage);
                    renderMessages();
                    
                    setTimeout(() => {
                        const response = {
                            id: ++messageId,
                            sender: "AI",
                            text: `File "${file.name}" received successfully! ðŸ“`,
                            time: getCurrentTime(),
                            type: "received",
                            timestamp: Date.now()
                        };
                        messages.push(response);
                        renderMessages();
                    }, 1000);
                }
            };
            input.click();
        }
        
        function openMenu() {
            const options = [
                'ðŸ”” Notification Settings',
                'âš™ï¸ Community Settings', 
                'ðŸ“¥ Export Chat History',
                'ðŸ—‘ï¸ Clear Chat History',
                'â“ Help & Support'
            ];
            
            const choice = prompt(`Choose an option:\n\n${options.map((opt, i) => `${i + 1}. ${opt}`).join('\n')}\n\nEnter number (1-5):`);
            
            switch(choice) {
                case '1':
                    alert('ðŸ”” Notification Settings\n\nâ€¢ Enable desktop notifications\nâ€¢ Sound alerts\nâ€¢ Email notifications\nâ€¢ Mobile push notifications\n\nSettings panel coming soon!');
                    break;
                case '2':
                    alert('âš™ï¸ Community Settings\n\nâ€¢ Theme preferences\nâ€¢ Message display options\nâ€¢ Privacy settings\nâ€¢ Language preferences\n\nSettings panel coming soon!');
                    break;
                case '3':
                    if (messages.length === 0) {
                        alert('No messages to export.');
                        return;
                    }
                    const chatData = {
                        community: 'IG Nation Community',
                        exportDate: new Date().toISOString(),
                        messageCount: messages.length,
                        messages: messages.map(msg => ({
                            sender: msg.sender,
                            text: msg.text,
                            time: msg.time,
                            timestamp: msg.timestamp
                        }))
                    };
                    const dataStr = JSON.stringify(chatData, null, 2);
                    const dataBlob = new Blob([dataStr], { type: 'application/json' });
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(dataBlob);
                    link.download = `ig-nation-chat-${new Date().toISOString().split('T')[0]}.json`;
                    link.click();
                    alert('âœ… Chat history exported successfully!');
                    break;
                case '4':
                    if (confirm('Are you sure you want to clear all chat history?')) {
                        messages = [];
                        renderMessages();
                        document.getElementById('welcomeContainer').style.display = 'flex';
                        document.getElementById('messagesList').style.display = 'none';
                        alert('ðŸ—‘ï¸ Chat history cleared successfully!');
                    }
                    break;
                case '5':
                    alert('â“ Help & Support\n\nðŸ“ How to use:\nâ€¢ Type messages and press Enter to send\nâ€¢ Click buttons in header for features\nâ€¢ All features are now working!\n\nðŸ”§ Features:\nâ€¢ Real-time messaging\nâ€¢ File sharing\nâ€¢ Message search\nâ€¢ Chat export\nâ€¢ Settings\n\nðŸ“ž Need more help? Contact support@ignation.com');
                    break;
                default:
                    alert('Invalid choice. Please try again.');
            }
        }
        
        // Enhanced message rendering with file support
        function renderMessages() {
            const messagesList = document.getElementById('messagesList');
            const welcomeContainer = document.getElementById('welcomeContainer');
            
            if (messages.length > 0) {
                welcomeContainer.style.display = 'none';
                messagesList.style.display = 'block';
                
                messagesList.innerHTML = messages.map(message => {
                    let fileContent = '';
                    if (message.file) {
                        fileContent = `
                            <div class="message-file">
                                <div class="file-icon">
                                    <iconify-icon icon="${getFileIcon(message.file.type)}"></iconify-icon>
                                </div>
                                <div class="file-info">
                                    <a href="${message.file.url}" class="file-download" download="${message.file.name}">
                                        ${message.file.name}
                                    </a>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">
                                        ${formatFileSize(message.file.size)}
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                    
                    return `
                        <div class="message ${message.type}" data-message-id="${message.id}">
                            <div class="message-avatar">${message.sender}</div>
                            <div class="message-bubble">
                                <p class="message-text">${message.text}</p>
                                ${fileContent}
                                <div class="message-time">${message.time}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                scrollToBottom();
            } else {
                welcomeContainer.style.display = 'flex';
                messagesList.style.display = 'none';
            }
        }
        
        // Initialize page on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Community page loaded successfully with simple interface!');
            console.log('All features are working with prompts and alerts.');
        });
    </script>
</body>
</html>